{% extends "sudoku/base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'sudoku/css/board.css' %}">
<link rel="stylesheet" href="{% static 'sudoku/css/accordion.css' %}">
{% endblock %}

{% block content %}
<h2 class="text-center mt-4">Create Your Sudoku</h2>

<div class="container-fluid mt-4">
  <div class="row h-100">
    <!-- Sidebar with dynamic accordion -->
    <div class="col-3 border-end pt-3">
      <div id="ruleAccordion" class="accordion"></div>
    </div>

    <!-- Centered board -->
    <div class="col-9 d-flex align-items-center justify-content-center">
      <div style="aspect-ratio: 1; width: 90vmin;">
        {% include "sudoku/components/board.html" %}
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<script>
  window.IS_CREATOR_MODE = true;
</script>
<script type="module">
  import { createBoard } from "{% static 'sudoku/js/board.js' %}";
  import { setupCreatorUI } from "{% static 'sudoku/js/creator_ui.js' %}";

  const container = document.querySelector(".board-container");
  const canvas    = document.getElementById("board-canvas");
  const grid      = document.getElementById("sudoku-board");

  const board = createBoard(container, canvas, grid);
  window.Board = board; // optional: make globally accessible

  board.initBoard();
  setupCreatorUI(board);
</script>
{% endblock %}
