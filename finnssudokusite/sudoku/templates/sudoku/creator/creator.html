{% extends "sudoku/base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'sudoku/css/board.css' %}">
<link rel="stylesheet" href="{% static 'sudoku/css/rulemanager.css' %}">
<link rel="stylesheet" href="{% static 'sudoku/css/accordion.css' %}">
{% endblock %}

{% block content %}
<h2 class="text-center mt-4">Create Your Sudoku</h2>
<div class="container-fluid mt-4">
	<div class="row h-100">
		<!-- LEFT COLUMN -->
		<div class="col-12 col-xl-3 col-md-6 d-flex flex-column p-3">

			<div class="position-relative">
				<input type="text" id="ruleSearchInput" class="form-control" placeholder="Start typing..." autocomplete="off">
				<ul id="ruleDropdown" class="list-group position-absolute rounded overflow-auto w-100" style="z-index: 1000;"></ul>
			</div>

			<div class="mt-4 w-100 rounded whitebox flex-fill overflow-auto" style="max-height: 500px; overflow-y: scroll;">
				<div id="accordionContainer" class="accordion w-100 flex-fill overflow-auto" style="max-height: 500px; overflow-y: scroll;"></div>

			</div>

			<!--			&lt;!&ndash; This box fills the column and scrolls internally &ndash;&gt;-->
<!--			<div class="w-100 border rounded whitebox flex-fill overflow-auto pt-3" style="max-height: 500px; overflow-y: scroll;">-->
<!--			</div>-->
		</div>

		<!-- CENTER COLUMN (the height “driver”) -->
		<div class="col-12 col-xl-6  d-flex flex-column p-3">
			<div class="w-100 border rounded whitebox flex-fill">
				{% include "sudoku/creator/board.html" %}
			</div>
		</div>

		<!-- RIGHT COLUMN -->
		<div class="col-12 col-xl-3  d-flex flex-column p-3">
			<div class="w-100 border rounded whitebox flex-fill pt-3">
				<div class="text-center mb-3">
					<strong class="text-uppercase" style="letter-spacing: 0.05em;">Coming Soon!</strong>
				</div>
				{% include "sudoku/creator/creator_solutioncheck.html" %}
			</div>


			<!-- Submit Sudoku Button -->
			<div class="mt-3 border rounded whitebox flex-fill pt-3 text-center">
				<button id="submit-sudoku-btn" class="btn btn-success">Submit Sudoku</button>
			</div>

			<!-- Submit Modal -->
			<div class="modal fade" id="submitSudokuModal" tabindex="-1" aria-labelledby="submitSudokuModalLabel"
				 aria-hidden="true">
				<div class="modal-dialog modal-xl modal-dialog-centered">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="submitSudokuModalLabel">Submit Your Sudoku</h5>
							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body">

							<div class="mb-3">
								<label for="sudoku-name" class="form-label">Sudoku Name</label>
								<input type="text" class="form-control" id="sudoku-name"
									   placeholder="Enter a name for your Sudoku">
							</div>

							<div class="mb-3">
								<label class="form-label">Tags</label>
								<div id="sudoku-tags">
									<!-- Tags will be inserted here dynamically -->
								</div>
							</div>

							<div class="d-flex justify-content-center align-items-center">
								<div class="preview-board-container border rounded p-2">
									<!-- Your board will be cloned and inserted here -->
									<div id="sudoku-preview" class="position-relative">
										<canvas id="preview-canvas"
												class="position-absolute top-0 start-0 w-100 h-100"></canvas>
										<div id="preview-grid" class="grid-container">
											<!-- Just a copy of the board grid -->
										</div>
									</div>
								</div>
							</div>

						</div>
						<div class="modal-footer">
							<button class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
							<button class="btn btn-primary">Submit</button>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>
</div>

{% endblock %}

{% block extra_scripts %}

<script type="module" src="{% static 'sudoku/js/ui/creator/creator_ui.js' %}"></script>

{% endblock %}
